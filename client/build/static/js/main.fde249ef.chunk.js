(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{142:function(e,t,a){},253:function(e,t,a){e.exports=a(492)},258:function(e,t,a){},294:function(e,t,a){},297:function(e,t,a){},300:function(e,t,a){},308:function(e,t){},310:function(e,t){},319:function(e,t,a){},440:function(e,t,a){},442:function(e,t,a){},490:function(e,t,a){},491:function(e,t,a){},492:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(20),l=a.n(s),o=(a(258),a(6)),i=a(5),c=a(8),m=a(7),u=a(9),p=a(517),d=a(516),h=a(13),g=a.n(h),f=function(e,t){return g.a.post("/api/auth/signup",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},E=function(e,t){return g.a.post("/api/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},b=function(){return g.a.delete("/api/auth/logout").then((function(e){return e.data})).catch((function(e){return e.response.data}))},v=function(e){return g.a.post("/api/gem/create",e).then((function(e){return console.log("Here is the new gem",e.data),e.data})).catch((function(e){return e.response.data}))},y=function(e){return g.a.post("/api/trip/create",e).then((function(e){return console.log("Here is the new trip",e.data),e.data})).catch((function(e){return e.response.data}))},C=function(e){var t=e;return console.log("Check Param",t),g.a.get("/api/trip/".concat(t)).then((function(e){return e.data})).catch((function(e){return e.response.data}))},w=function(e){console.log("Updated Trip to pass to function which makes axios call object:",e);var t=e.existingGems,a=e.selectedTrip;return g.a.put("/api/trip/update",{gemsVisited:t,gemId:a}).then((function(e){console.log("Received Data from server back frontend",e)})).catch((function(e){console.log(e)}))},O=function(e){var t=e;return g.a.get("/api/gem/creator/".concat(t)).then((function(e){return console.log("Got data from Axios call",e.data),e.data})).catch((function(e){return e.response.data}))},j=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleLogout=function(e){console.log("LOGOUT PROPS: ",e),b().then((function(){a.props.setUser(null),a.props.history.push("/logout")}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,{className:"bg-light",in:"setOpen",variant:"light"},r.a.createElement(p.a.Brand,{href:"/"},r.a.createElement("svg",{className:"Logo-navbar",width:"50",height:"36",viewBox:"0 0 200 144",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},r.a.createElement("path",{d:"M57.4223 35.992V63.352C54.7983 64.888 51.4703 66.104 47.4383 67C43.4063 67.896 39.0223 68.344 34.2863 68.344C26.9263 68.344 20.7183 66.808 15.6623 63.736C10.6063 60.6 6.79825 56.44 4.23825 51.256C1.74225 46.072 0.49425 40.408 0.49425 34.264C0.49425 28.184 1.80625 22.584 4.43025 17.464C7.05425 12.28 10.9903 8.152 16.2383 5.08C21.5503 2.008 27.9503 0.471998 35.4383 0.471998C39.5343 0.471998 43.4063 1.112 47.0543 2.392C50.7663 3.608 53.9023 5.304 56.4623 7.48L52.9103 14.968C50.8623 13.112 48.3023 11.608 45.2303 10.456C42.1583 9.304 38.8943 8.72799 35.4383 8.72799C30.3823 8.72799 26.0303 9.848 22.3823 12.088C18.7983 14.328 16.0783 17.4 14.2223 21.304C12.3663 25.144 11.4383 29.496 11.4383 34.36C11.4383 39.288 12.3023 43.704 14.0303 47.608C15.8223 51.512 18.4143 54.584 21.8063 56.824C25.2623 59.064 29.4223 60.184 34.2863 60.184C38.7023 60.184 42.8943 59.704 46.8623 58.744V35.992H57.4223ZM115.108 59.032V67H74.0198V1.72H113.188V9.688H84.9638V28.504H109.348V36.472H84.9638V59.032H115.108ZM195.447 1.72V67H184.695V45.592L185.367 18.808L166.935 47.224H159.159L140.439 18.52L141.303 45.592V67H130.551V1.72H140.535L162.999 36.088L185.463 1.72H195.447Z",fill:"#4BADB6"}),r.a.createElement("path",{d:"M43.4545 109.536C48.1905 110.496 51.7745 112.448 54.2065 115.392C56.6385 118.272 57.8545 121.824 57.8545 126.048C57.8545 131.616 55.7425 136 51.5185 139.2C47.2945 142.4 41.1825 144 33.1825 144H10.2385V78.72H33.1825C40.2865 78.72 45.6945 80.128 49.4065 82.944C53.1185 85.76 54.9745 89.824 54.9745 95.136C54.9745 98.592 53.9825 101.6 51.9985 104.16C50.0785 106.72 47.2305 108.512 43.4545 109.536ZM21.1825 86.688V105.6H33.1825C36.6385 105.6 39.2945 104.8 41.1505 103.2C43.0705 101.536 44.0305 99.2 44.0305 96.192C44.0305 89.856 40.4145 86.688 33.1825 86.688H21.1825ZM33.1825 136.032C37.5345 136.032 40.8945 135.072 43.2625 133.152C45.6945 131.168 46.9105 128.384 46.9105 124.8C46.9105 121.024 45.7265 118.208 43.3585 116.352C41.0545 114.496 37.6625 113.568 33.1825 113.568H21.1825V136.032H33.1825ZM186.921 144L168.585 117.312L150.153 144H137.289L161.961 110.304L138.921 78.72H151.881L168.585 103.488L185.289 78.72H198.153L175.113 110.112L199.977 144H186.921Z",fill:"#282727"}),r.a.createElement("rect",{x:"65",y:"72",width:"70",height:"72",fill:"url(#pattern0)"}),r.a.createElement("defs",null,r.a.createElement("filter",{id:"filter0_b",x:"-3.50574",y:"-3.52802",width:"202.953",height:"75.872",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"},r.a.createElement("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"}),r.a.createElement("feGaussianBlur",{in:"BackgroundImage",stdDeviation:"2"}),r.a.createElement("feComposite",{in2:"SourceAlpha",operator:"in",result:"effect1_backgroundBlur"}),r.a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_backgroundBlur",result:"shape"})),r.a.createElement("pattern",{id:"pattern0",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},r.a.createElement("use",{xlinkHref:"#image0",transform:"translate(-0.0142857) scale(0.0205714 0.02)"})),r.a.createElement("image",{id:"image0",width:"50",height:"50",xlinkHref:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAFK0lEQVRoge2aXYhVVRTHf3dGZyZTNC0rgiQ0pkgiLTWmJiPUSCSsQH2olKKyCSyo7Msg+yINKuslsHDMCiyjIi2yEgwaH/qiiSx7KEhKjdIa89Z83dPDWru975597j3nnnvvJPiHw5yz1tprr33O3vu/9roDx3AM/yuMA/4CoipfR4AJ9RrEWKC7BoMwV7f2UVOMAnY6nW6PsWsGPlCbH/SKVNYc02a747cLGF21qD00Ae9qR4f17wMBu0bgNdUfAFqBycAvKnsLGBFot0r1f2IH3VLVEQSC+1Lv53h2OWC96v4Apjm6qcDvqtuoti7mqu5zigc9slqDaABeUceHgBlAHiggi97FWuyibQ/4moX9mus83VhgEPgbmA78pnavIy8yE3LA89hPPgO4QJ93e7b3q7wPuKKEzznAP2p7n6f7VuXnA+chLy4CNjD0C6aCecN5YLbKbnOcGyxX2SCwOIHfq4ABbXO7I+9UWYc+t2G3ef8LJsZqddALzHfkG1V+qxdUAbglhf9l2mYQWKKyDvXd6di5X/ChFP4BeUuRBrjI032nuuleJ/em7QSZWmY6zkemVIRMMRcLgX7V3ZPU+Q3ImyoAN3q6cdgF2U78wk2DNdjpexl2IznBs7tW+y5gZ0MsyhmbLXI/cFDvXyDbQsypj0h97tf7uQHbUi/5P7ifb2WMzYMUpxNvEia3tGgENnu+V8XYlpr2iRfUVqejj4hPNypBE/Ce4/+dErbBjagdIbBaJYG1vo4A7Q3Il8jMnMOIRmQMANyM3TmmxbUA7sBOq1phB0OJ0sdULFHe5CtfVMX3xJ8HxmCz03MzBFsqwALQUyaG3RrDppBBC/CZGrxN/Jb6rNqsrzzeWJhtOI6XckgSGQFfIeejICZhs867Y2ymIFyTB06sLN4gxiMLt4CcYUJYic3CJ5dzuAAJdIAwKQFsI5y9ZoHJnrfG6C9FeK6A5HeJ8Cj2EHVaQD9P9T9TnYPPCGAv8Yx+Cvaw9Ugaxw1YctqFkJUPU4BIkraXwxL19Q1D1+ZI4GPVf0gFVDEeWzR4JqA3Z5CutI4D2KW+QseAdar7CTip0g5mYlOX6zzdKOzGMLPSDrCp+0HgeE+3GJvmt2XoA5AsOEII6BxPZ06Qwf08IV5WH2s8eSuWs5Zn8F+EDepwD8VEdTqyk/QR3hTK4VQk8RsAznDko5H1EiGFj6qhBSnTREiJxl2QW1S+ugK/D2MrJQY5bOmpmxKkVymmYKsadzrydpX9SrqCWjP2EHWxI79LZT3AWRniLYkFCCH1Y6sqAJ9q50tT+Fqmbb5wZG3INC0AV2cJNAkexx53zbpYGgiqHMzgr9fnkxGCjYDHqhJpGTQA72M5pAmZJvtUFqow+rgEmzm0IMxuiuM7qOP5aALwo3b8lMrM8XNLgvZvUHysflqf95KB9CrFLCxZLgIm6rO/lfqYhKyxXiSHWoisiT7gohrGWxKmfHoYIctN+ry2RJsn1eYlikmvo0SbuqATS5Zm7h9iaLoBwgnmp4XZWNJ7tR6BlsNxyG4VIXWuLuLTCpPufIKtY31NeNDDgjORH3YibJF7D8UZQA571jY2PcDZdY00Aa7EkuUBJNB5jv5ybAbQq7bX1DnGxDAFaVPc3ubozO+PZnE/UffoUqAR++usKYa3IlNvUC9DetWoGdcUE7Hn7wgpHz3nPO9D0vejAhciBGeql3m976c40z0qsIKhBecVwxpRBrj/JbFzmGPJhDFI9TBPHf6/pNZoJb4EWjX8C2RUC1duuJhSAAAAAElFTkSuQmCC"})))),r.a.createElement(d.a,{title:"Menu",id:"collasible-nav-dropdown",className:"menu-navbar"},r.a.createElement(d.a.Item,{href:"/"},"Home"),r.a.createElement(d.a.Item,{href:"/explore-places"},"Explore places"),this.props.user?r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.Item,{href:"/create-gem"},"Create Gem"),r.a.createElement(d.a.Item,{href:this.props.user?"/profile/"+this.props.user._id:"/"},"Profile"),r.a.createElement(d.a.Divider,null),r.a.createElement(d.a.Item,{onClick:this.handleLogout},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.Item,{href:"/login"},"Login"),r.a.createElement(d.a.Item,{href:"/signup"},"Signup"))))}}]),t}(r.a.Component),S=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"This is About Us")}}]),t}(n.Component),k=a(1),N=a(515),G=a(518),D=(a(294),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",message:""},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(k.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;E(n,r).then((function(e){e.message?a.setState({message:e.message,username:"",password:""}):(console.log(e),a.props.setUser(e),a.props.history.push("/explore-places"))}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"app-wrapper"},r.a.createElement("div",{className:"pageheader py-2"},"Login"),r.a.createElement(N.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,{htmlFor:"username",className:"label-title"},"Username:"," "),r.a.createElement(N.a.Control,{className:"input-login-signup",type:"text",name:"username",value:this.state.username,onChange:this.handleChange,id:"username"})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,{htmlFor:"password",className:"label-title"},"Password:"," "),r.a.createElement(N.a.Control,{className:"input-login-signup",type:"password",name:"password",value:this.state.password,onChange:this.handleChange,id:"password"})),this.state.message&&r.a.createElement(G.a,{variant:"danger"},this.state.message),r.a.createElement("a",{href:"/explore-places",className:"button-link"},r.a.createElement("button",{type:"submit",className:"btn loginBtn generalBtn btn-primary"},"Login"))),r.a.createElement("div",{className:"social-login"},r.a.createElement("a",{href:"http://localhost:5555/api/auth/google"},r.a.createElement("button",{className:"btn socialLoginBtn generalBtn btn-primary"},"Login with Google ",r.a.createElement("i",{class:"fab fa-google icon-padding"}))),r.a.createElement("a",{href:"http://localhost:5555/api/auth/facebook"},r.a.createElement("button",{className:"btn socialLoginBtn generalBtn btn-primary"},"Login with Facebook ",r.a.createElement("i",{class:"fab fa-facebook"}))))))}}]),t}(n.Component)),x=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",message:""},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(k.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;f(n,r).then((function(e){e.message?a.setState({message:e.message,username:"",password:""}):(a.props.setUser(e),a.props.history.push("/profile"))}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"app-wrapper"},r.a.createElement("div",{className:"pageheader py-2"},"Signup"),r.a.createElement(N.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,{htmlFor:"username",className:"label-title"},"Username:"),r.a.createElement(N.a.Control,{className:"input-login-signup",type:"text",name:"username",value:this.state.username,onChange:this.handleChange,id:"username"})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,{htmlFor:"password",className:"label-title"},"Password:"," "),r.a.createElement(N.a.Control,{className:"input-login-signup",type:"password",name:"password",value:this.state.password,onChange:this.handleChange,id:"password"})),this.state.message&&r.a.createElement(G.a,{variant:"danger"},this.state.message),r.a.createElement("a",{href:"/update-profile",className:"button-link"},r.a.createElement("button",{type:"submit",className:"btn loginBtn generalBtn btn-primary"},"Signup"))),r.a.createElement("div",{className:"social-login"},r.a.createElement("a",{href:"http://localhost:5555/api/auth/google"},r.a.createElement("button",{className:"btn socialLoginBtn generalBtn btn-primary"},"Sign in Google ",r.a.createElement("i",{class:"fab fa-google icon-padding"}))),r.a.createElement("a",{href:"http://localhost:5555/api/auth/facebook"},r.a.createElement("button",{className:"btn socialLoginBtn generalBtn btn-primary"},"Login with Facebook ",r.a.createElement("i",{class:"fab fa-facebook"}))))))}}]),t}(r.a.Component),A=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={quote:"",author:""},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.get("/api/wisdom").then((function(e){return e.data})).catch((function(e){return e.resonse.data})).then((function(t){console.log(t),e.setState({quote:t.quote,author:t.author})}))}},{key:"render",value:function(){return console.log(this.state),r.a.createElement("div",null,r.a.createElement("div",{className:"wisdom-wrapper"},r.a.createElement("div",{className:"header-box"},r.a.createElement("h1",null,"Enjoy your Trip!")),r.a.createElement("div",{className:"wisdom"},r.a.createElement("p",null,r.a.createElement("q",null,'"',this.state.quote,'"')),r.a.createElement("p",null,"- ",this.state.author))))}}]),t}(r.a.Component),I=a(23),P=(a(297),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:null},a.componentDidMount=function(){a.setState({user:a.props.user})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log("HOME PROPS: ",this.props),r.a.createElement("div",{className:"Landingpage"},r.a.createElement("svg",{className:"Logo",width:"200",height:"144",viewBox:"0 0 200 144",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},r.a.createElement("path",{d:"M57.4223 35.992V63.352C54.7983 64.888 51.4703 66.104 47.4383 67C43.4063 67.896 39.0223 68.344 34.2863 68.344C26.9263 68.344 20.7183 66.808 15.6623 63.736C10.6063 60.6 6.79825 56.44 4.23825 51.256C1.74225 46.072 0.49425 40.408 0.49425 34.264C0.49425 28.184 1.80625 22.584 4.43025 17.464C7.05425 12.28 10.9903 8.152 16.2383 5.08C21.5503 2.008 27.9503 0.471998 35.4383 0.471998C39.5343 0.471998 43.4063 1.112 47.0543 2.392C50.7663 3.608 53.9023 5.304 56.4623 7.48L52.9103 14.968C50.8623 13.112 48.3023 11.608 45.2303 10.456C42.1583 9.304 38.8943 8.72799 35.4383 8.72799C30.3823 8.72799 26.0303 9.848 22.3823 12.088C18.7983 14.328 16.0783 17.4 14.2223 21.304C12.3663 25.144 11.4383 29.496 11.4383 34.36C11.4383 39.288 12.3023 43.704 14.0303 47.608C15.8223 51.512 18.4143 54.584 21.8063 56.824C25.2623 59.064 29.4223 60.184 34.2863 60.184C38.7023 60.184 42.8943 59.704 46.8623 58.744V35.992H57.4223ZM115.108 59.032V67H74.0198V1.72H113.188V9.688H84.9638V28.504H109.348V36.472H84.9638V59.032H115.108ZM195.447 1.72V67H184.695V45.592L185.367 18.808L166.935 47.224H159.159L140.439 18.52L141.303 45.592V67H130.551V1.72H140.535L162.999 36.088L185.463 1.72H195.447Z",fill:"#4BADB6"}),r.a.createElement("path",{d:"M43.4545 109.536C48.1905 110.496 51.7745 112.448 54.2065 115.392C56.6385 118.272 57.8545 121.824 57.8545 126.048C57.8545 131.616 55.7425 136 51.5185 139.2C47.2945 142.4 41.1825 144 33.1825 144H10.2385V78.72H33.1825C40.2865 78.72 45.6945 80.128 49.4065 82.944C53.1185 85.76 54.9745 89.824 54.9745 95.136C54.9745 98.592 53.9825 101.6 51.9985 104.16C50.0785 106.72 47.2305 108.512 43.4545 109.536ZM21.1825 86.688V105.6H33.1825C36.6385 105.6 39.2945 104.8 41.1505 103.2C43.0705 101.536 44.0305 99.2 44.0305 96.192C44.0305 89.856 40.4145 86.688 33.1825 86.688H21.1825ZM33.1825 136.032C37.5345 136.032 40.8945 135.072 43.2625 133.152C45.6945 131.168 46.9105 128.384 46.9105 124.8C46.9105 121.024 45.7265 118.208 43.3585 116.352C41.0545 114.496 37.6625 113.568 33.1825 113.568H21.1825V136.032H33.1825ZM186.921 144L168.585 117.312L150.153 144H137.289L161.961 110.304L138.921 78.72H151.881L168.585 103.488L185.289 78.72H198.153L175.113 110.112L199.977 144H186.921Z",fill:"#282727"}),r.a.createElement("rect",{x:"65",y:"72",width:"70",height:"72",fill:"url(#pattern0)"}),r.a.createElement("defs",null,r.a.createElement("filter",{id:"filter0_b",x:"-3.50574",y:"-3.52802",width:"202.953",height:"75.872",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"},r.a.createElement("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"}),r.a.createElement("feGaussianBlur",{in:"BackgroundImage",stdDeviation:"2"}),r.a.createElement("feComposite",{in2:"SourceAlpha",operator:"in",result:"effect1_backgroundBlur"}),r.a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_backgroundBlur",result:"shape"})),r.a.createElement("pattern",{id:"pattern0",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},r.a.createElement("use",{xlinkHref:"#image0",transform:"translate(-0.0142857) scale(0.0205714 0.02)"})),r.a.createElement("image",{id:"image0",width:"50",height:"50",xlinkHref:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAFK0lEQVRoge2aXYhVVRTHf3dGZyZTNC0rgiQ0pkgiLTWmJiPUSCSsQH2olKKyCSyo7Msg+yINKuslsHDMCiyjIi2yEgwaH/qiiSx7KEhKjdIa89Z83dPDWru975597j3nnnvvJPiHw5yz1tprr33O3vu/9roDx3AM/yuMA/4CoipfR4AJ9RrEWKC7BoMwV7f2UVOMAnY6nW6PsWsGPlCbH/SKVNYc02a747cLGF21qD00Ae9qR4f17wMBu0bgNdUfAFqBycAvKnsLGBFot0r1f2IH3VLVEQSC+1Lv53h2OWC96v4Apjm6qcDvqtuoti7mqu5zigc9slqDaABeUceHgBlAHiggi97FWuyibQ/4moX9mus83VhgEPgbmA78pnavIy8yE3LA89hPPgO4QJ93e7b3q7wPuKKEzznAP2p7n6f7VuXnA+chLy4CNjD0C6aCecN5YLbKbnOcGyxX2SCwOIHfq4ABbXO7I+9UWYc+t2G3ef8LJsZqddALzHfkG1V+qxdUAbglhf9l2mYQWKKyDvXd6di5X/ChFP4BeUuRBrjI032nuuleJ/em7QSZWmY6zkemVIRMMRcLgX7V3ZPU+Q3ImyoAN3q6cdgF2U78wk2DNdjpexl2IznBs7tW+y5gZ0MsyhmbLXI/cFDvXyDbQsypj0h97tf7uQHbUi/5P7ifb2WMzYMUpxNvEia3tGgENnu+V8XYlpr2iRfUVqejj4hPNypBE/Ce4/+dErbBjagdIbBaJYG1vo4A7Q3Il8jMnMOIRmQMANyM3TmmxbUA7sBOq1phB0OJ0sdULFHe5CtfVMX3xJ8HxmCz03MzBFsqwALQUyaG3RrDppBBC/CZGrxN/Jb6rNqsrzzeWJhtOI6XckgSGQFfIeejICZhs867Y2ymIFyTB06sLN4gxiMLt4CcYUJYic3CJ5dzuAAJdIAwKQFsI5y9ZoHJnrfG6C9FeK6A5HeJ8Cj2EHVaQD9P9T9TnYPPCGAv8Yx+Cvaw9Ugaxw1YctqFkJUPU4BIkraXwxL19Q1D1+ZI4GPVf0gFVDEeWzR4JqA3Z5CutI4D2KW+QseAdar7CTip0g5mYlOX6zzdKOzGMLPSDrCp+0HgeE+3GJvmt2XoA5AsOEII6BxPZ06Qwf08IV5WH2s8eSuWs5Zn8F+EDepwD8VEdTqyk/QR3hTK4VQk8RsAznDko5H1EiGFj6qhBSnTREiJxl2QW1S+ugK/D2MrJQY5bOmpmxKkVymmYKsadzrydpX9SrqCWjP2EHWxI79LZT3AWRniLYkFCCH1Y6sqAJ9q50tT+Fqmbb5wZG3INC0AV2cJNAkexx53zbpYGgiqHMzgr9fnkxGCjYDHqhJpGTQA72M5pAmZJvtUFqow+rgEmzm0IMxuiuM7qOP5aALwo3b8lMrM8XNLgvZvUHysflqf95KB9CrFLCxZLgIm6rO/lfqYhKyxXiSHWoisiT7gohrGWxKmfHoYIctN+ry2RJsn1eYlikmvo0SbuqATS5Zm7h9iaLoBwgnmp4XZWNJ7tR6BlsNxyG4VIXWuLuLTCpPufIKtY31NeNDDgjORH3YibJF7D8UZQA571jY2PcDZdY00Aa7EkuUBJNB5jv5ybAbQq7bX1DnGxDAFaVPc3ubozO+PZnE/UffoUqAR++usKYa3IlNvUC9DetWoGdcUE7Hn7wgpHz3nPO9D0vejAhciBGeql3m976c40z0qsIKhBecVwxpRBrj/JbFzmGPJhDFI9TBPHf6/pNZoJb4EWjX8C2RUC1duuJhSAAAAAElFTkSuQmCC"}))),r.a.createElement("div",{className:"Teaser"},r.a.createElement("div",{className:"TeaserTextContainer"},r.a.createElement("div",{className:"TeaserText"},r.a.createElement("p",null,"Get inspired."),r.a.createElement("p",null,"Explore places."),r.a.createElement("p",null,"Share discoveries.")))),r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("a",{className:"btn btn-primary btn-landingpage generalBtn-landing",href:"/explore-places",role:"button"},"Open the box")),!this.state.user&&r.a.createElement("div",{className:"btn-signup-login"},r.a.createElement("p",null,r.a.createElement(I.b,{className:"btn btn-link btn-lp ",to:"/Signup"},"Join the community")),r.a.createElement("p",null,r.a.createElement(I.b,{className:"btn btn-link btn-lp",to:"/Login"},"Login")))),this.state.message&&r.a.createElement(G.a,{variant:"danger"},this.state.message))}}]),t}(n.Component)),F=a(235),T=a(249),L=(a(300),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={displayFilters:!1,gemsData:null,filterStatus:a.props.filterStatus,selectedOption:null},a.handleSelectChange=function(e){a.setState({selectedOption:e}),console.log("Option selected:",e)},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){this.state.selectedOption;return r.a.createElement("div",{className:"filters-block-wrapper"},r.a.createElement("div",{className:"filters-block-inside"},r.a.createElement("h1",null,"Filter by"),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:this.props.handleFilterSubmit},r.a.createElement("div",{className:"inputs-container"},r.a.createElement("div",{className:"inputs-col"},r.a.createElement(T.a,{defaultValue:"all",value:this.props.filterStatus.userFilter,onChange:this.props.handleSelectChange,options:this.props.userFilterOptions}))),r.a.createElement("div",{className:"inputs-container"},r.a.createElement("div",{className:"inputs-col"},r.a.createElement("input",{type:"checkbox",name:"showGems",id:"showGems",checked:this.props.filterStatus.showGems,onChange:this.props.handleFilterChange}),r.a.createElement("label",{htmlFor:"showGems"},"Gems")),r.a.createElement("div",{className:"inputs-col"},r.a.createElement("input",{type:"checkbox",name:"showTrips",id:"showTrips",checked:this.props.filterStatus.showTrips,onChange:this.props.handleFilterChange}),r.a.createElement("label",{htmlFor:"showTrips"},"Trips"))),r.a.createElement("hr",null),r.a.createElement("h2",null,"Show by date"),r.a.createElement("div",{className:"inputs-dates"},r.a.createElement("label",{htmlFor:"dateStart"},"From:"),r.a.createElement("input",{type:"date",id:"dateStart",name:"dateStart",value:this.props.filterStatus.dateStart,onChange:this.props.handleFilterChange})),r.a.createElement("div",{className:"inputs-dates"},r.a.createElement("label",{htmlFor:"dateStart"},"To:"),r.a.createElement("input",{type:"date",id:"dateEnd",name:"dateEnd",value:this.props.filterStatus.dateEnd,onChange:this.props.handleFilterChange})),r.a.createElement("hr",null),r.a.createElement("h2",null,"Categories"),r.a.createElement("div",{className:"inputs-container"},r.a.createElement("div",{className:"inputs-col"},r.a.createElement("input",{type:"checkbox",name:"foodDrinks",id:"foodDrinks",checked:this.props.filterStatus.foodDrinks,onChange:this.props.handleFilterChange}),r.a.createElement("label",{htmlFor:"foodDrinks"},"Food & Drinks"),r.a.createElement("input",{type:"checkbox",name:"cultureArts",id:"cultureArts",checked:this.props.filterStatus.cultureArts,onChange:this.props.handleFilterChange}),r.a.createElement("label",{htmlFor:"cultureArts"},"Culture & Arts"),r.a.createElement("input",{type:"checkbox",name:"sports",id:"sports",checked:this.props.filterStatus.sports,onChange:this.props.handleFilterChange}),r.a.createElement("label",{htmlFor:"sports"},"Sports"),r.a.createElement("input",{type:"checkbox",name:"party",id:"party",checked:this.props.filterStatus.party,onChange:this.props.handleFilterChange}),r.a.createElement("label",{htmlFor:"party"},"Party")),r.a.createElement("div",{className:"inputs-col"},r.a.createElement("input",{type:"checkbox",name:"hikes",id:"hikes",checked:this.props.filterStatus.hikes,onChange:this.props.handleFilterChange}),r.a.createElement("label",{htmlFor:"hikes"},"Hikes"),r.a.createElement("input",{type:"checkbox",name:"nature",id:"nature",checked:this.props.filterStatus.nature,onChange:this.props.handleFilterChange}),r.a.createElement("label",{htmlFor:"nature"},"Nature"),r.a.createElement("input",{type:"checkbox",name:"other",id:"other",checked:this.props.filterStatus.other,onChange:this.props.handleFilterChange}),r.a.createElement("label",{htmlFor:"other"},"Other"))),r.a.createElement("hr",null),r.a.createElement(F.a,{className:"btn btn-primary generalBtn",type:"submit"},"Apply & Close"))))}}]),t}(n.Component)),B=(a(96),a(25)),H=function(e){return r.a.createElement("div",null,r.a.createElement(B.a,{latitude:e.data.latitude,longitude:e.data.longitude,captureClick:!1,draggable:!1,offsetTop:-30,offsetLeft:-15},r.a.createElement("div",{className:"gem-marker",onClick:function(){e.openPopup(e.data)}},r.a.createElement("img",{src:"/images/diamond-icon-green.png",alt:"Gem"}))))},M=a(92),V=a(35);a(319);function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach((function(t){Object(k.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var q=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={currentGemData:a.props.data,currentGemIndex:0,experienceGemData:null,creatorData:null,fromProfile:a.props.fromProfile},a.componentDidMount=function(){a.state.currentGemData||a.getGemData(),a.state.currentGemData&&!a.state.creatorData&&a.getCreatorData(),a.state.currentGemData&&!a.state.experienceGemData&&a.getExperienceGemData()},a.getGemData=function(){var e=a.props.match.params.gemId;g.a.get("/api/gem/".concat(e)).then((function(e){a.setState({currentGemData:e.data})}))},a.handleLike=function(){var e=Object(V.a)(a.state.currentGemData.likes),t=a.props.user._id;e.includes(t)?e.splice(e.indexOf(t),1):e.push(a.props.user._id);var n=a.state.currentGemData._id;g.a.put("/api/gem/".concat(n),{likes:e}).then((function(e){console.log(e),a.setState({currentGemData:Y({},e.data,{likes:e.data.likes})})}))},a.getGemExperience=function(e){var t=a.state,n=t.currentGemIndex,r=t.experienceGemData,s=n;"previous"===e.target.name&&n>0&&(s-=1),"next"===e.target.name&&n<r.length-1&&(s+=1);var l=r[s];a.setState({currentGemIndex:s,currentGemData:l})},a.getExperienceGemData=function(){g.a.get("/api/gem/").then((function(e){console.log(e);var t=a.state.currentGemData,n=t.latitude,r=t.longitude,s=e.data.filter((function(e){return e.latitude===n&&e.longitude===r}));a.setState({experienceGemData:s})})).catch((function(e){404===e.response.status&&a.setState({error:"Not found"})}))},a.getCreatorData=function(){console.log("get creator data called",a.state.currentGemData.creator);var e=a.state.currentGemData.creator;g.a.get("/api/user/".concat(e)).then((function(e){console.log(e),a.setState({creatorData:e.data})})).catch((function(e){404===e.response.status&&a.setState({error:"Not found"})}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;if(console.log("Creator data: ",this.state.creatorData),!this.state.currentGemData)return r.a.createElement(r.a.Fragment,null);this.state.currentGemData&&this.state.currentGemData.creator;var t=this.state.currentGemData;if(!t)return r.a.createElement(r.a.Fragment,null);var a=!(!this.props.user||!t.likes.includes(this.props.user._id)),n=a?"btn-unlike":"btn-like";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pageheader shadow"},r.a.createElement("h3",null,t.title)),r.a.createElement("div",{className:"gem-details page-wrapper "},r.a.createElement("img",{className:"gem-details-image",src:t.imageUrl,alt:""}),r.a.createElement("div",{className:"flex-row-sides creatorDataOnGem"},this.state.creatorData&&r.a.createElement("p",{className:"details-titles"},t.discovery?r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"gem-discovery-icon",src:"images/diamond-icon-gold.png",alt:"gem",height:"20px"})," ","Discovered"):r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"gem-discovery-icon",src:"images/diamond-icon-green.png",alt:"gem",height:"20px"})," ","Experienced")," ","by"," ",r.a.createElement("a",{href:"/profile/".concat(this.state.creatorData._id)},this.state.creatorData.username)),r.a.createElement("div",null,this.props.user?r.a.createElement("span",{className:n,onClick:function(){return e.handleLike()}},a?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fas fa-heart"})," ",t.likes.length):r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"far fa-heart"})," ",t.likes.length)):r.a.createElement(r.a.Fragment,null,"Likes: ",t.likes.length))),this.state.experienceGemData&&this.state.experienceGemData.length>1&&r.a.createElement("div",{className:"flex-row-sides"},r.a.createElement("button",{className:"btn-previous",name:"previous",onClick:this.getGemExperience},r.a.createElement("i",{class:"fa fa-chevron-left"})," Previous"),r.a.createElement("button",{className:"btn-next",name:"next",onClick:this.getGemExperience},"Next ",r.a.createElement("i",{class:"fa fa-chevron-right"}))),r.a.createElement("div",{className:"gem-details-info"},r.a.createElement("div",{className:"flex-row-sides"},t.locationName&&r.a.createElement("p",null,t.locationName.substring(0,30),"...")),r.a.createElement("div",{className:"gem-divs"},r.a.createElement("p",{className:"details-titles"},"Descriprion: "),r.a.createElement("p",{className:"details-infos"},t.description)),r.a.createElement("div",{className:"gem-divs"},r.a.createElement("p",{className:"details-titles"},"Good to know: "),r.a.createElement("p",{className:"details-infos"},t.goodToKnow)),r.a.createElement("div",{className:"cat-creat-container"},r.a.createElement("div",{className:"gem-divs"},r.a.createElement("p",{className:"details-titles"},"Category: "),r.a.createElement("p",{className:"details-infos"},{foodDrinks:"Food & Drinks",cultureArts:"Culture & Arts",hikes:"Hikes",nature:"Nature & Sight",party:"Party",sports:"Sports",others:"Others"}[t.category])),r.a.createElement("div",{className:"gem-divs"},r.a.createElement("p",{className:"details-titles"},"Created: "),r.a.createElement("p",{className:"details-infos"},t.created_at.slice(0,10))))),this.props.closeDetails?r.a.createElement("div",null,r.a.createElement(F.a,{className:"back-btn generalBtn",onClick:this.props.closeDetails},"Back to Map")):r.a.createElement("div",null,r.a.createElement(I.b,{className:"back-Link",to:"/explore-places"},r.a.createElement(F.a,{className:"back-btn generalBtn"},"Back to Map"))),r.a.createElement("div",{className:"arrow-down"},r.a.createElement("i",{className:"fas fa-angle-down"}))))}}]),t}(n.Component);a(93);function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(a,!0).forEach((function(t){Object(k.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={viewport:{width:"100%",height:"95vh",latitude:70.520008,longitude:70.404954,zoom:2},gemSelectedInfo:a.props.gemSelectedInfo,displayDetails:!1},a.openPopup=function(e){a.setState({gemSelectedInfo:J({},e)})},a.closeDetails=function(){a.setState({displayDetails:!1,gemSelectedInfo:null})},a.openDetails=function(){a.setState({displayDetails:!0})},a.setUserLocation=function(){navigator.geolocation.getCurrentPosition((function(e){var t={lat:e.coords.latitude,long:e.coords.longitude};a.setState({viewport:J({},a.state.viewport,{latitude:t.lat,longitude:t.long})})}))},a.onGeocontrolSelected=function(e,t){a.setState({viewport:e,marker:{longitude:e.longitude,latitude:e.latitude}})},a.renderPopup=function(){var e=a.state.gemSelectedInfo,t={foodDrinks:["Food & Drinks","#363"],cultureArts:["Culture & Arts","#229"],hikes:["Hikes","#4badb6"],nature:["Nature & Sight","#2b2"],party:["Party","#811"],sports:["Sports","#292"],others:["Others","#555"]};return e&&r.a.createElement(B.c,{className:"gem-popup",tipSize:5,anchor:"top",latitude:e.latitude,longitude:e.longitude,closeButton:!0,closeOnClick:!1,onClose:function(){return a.setState({gemSelectedInfo:null})}},r.a.createElement("div",null,r.a.createElement("img",{className:"gem-popup-img",src:e.imageUrl,alt:""}),r.a.createElement("p",{className:"gem-popup-title"},r.a.createElement("strong",null,e.title)),r.a.createElement("p",{className:"gem-popup-category"},r.a.createElement("span",{style:{color:"".concat(t[e.category][1])}},t[e.category][0])),r.a.createElement("button",{onClick:a.openDetails,className:"gem-popup-btn"},"Explore")))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.gems.map((function(t){return r.a.createElement(H,{key:t._id,data:t,openPopup:e.openPopup})}));return this.setUserLocation(),r.a.createElement("div",{className:"page-wrapper"},this.state.displayDetails?r.a.createElement(r.a.Fragment,null,r.a.createElement(q,{data:this.state.gemSelectedInfo,user:this.props.user,closeDetails:this.closeDetails})):r.a.createElement(B.d,Object.assign({},this.state.viewport,{onViewportChange:function(t){return e.setState({viewport:t})},mapboxApiAccessToken:"pk.eyJ1IjoiaW91cmkiLCJhIjoiY2swaTRnZGxnMDhyYjNmbXp1cTh4aGY0YSJ9.MmEIAiv3ZCEZzc_VLtZnCg",mapStyle:"mapbox://styles/iouri/ck1kx1czi1r971cpj0s2ngu2q",captureDoubleClick:!1,doubleClickZoom:!1}),r.a.createElement("div",{style:{position:"absolute",right:"2vw",top:"10vh"}},r.a.createElement(B.b,{onViewportChange:function(t){return e.setState({viewport:t})}})),r.a.createElement("div",null,r.a.createElement(F.a,{className:"btn btn-primary generalBtn filters-btn",onClick:this.props.toggleFilters},r.a.createElement("i",{className:"fas fa-filter"}))),r.a.createElement("div",{className:"geocoder-container"},r.a.createElement(M.a,{style:{height:"100px"},placeholder:"Search for a Gem...",mapboxApiAccessToken:"pk.eyJ1IjoiaW91cmkiLCJhIjoiY2swaTRnZGxnMDhyYjNmbXp1cTh4aGY0YSJ9.MmEIAiv3ZCEZzc_VLtZnCg",onSelected:this.onGeocontrolSelected,viewport:this.state.viewport})),t,this.renderPopup()))}}]),t}(n.Component);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(a,!0).forEach((function(t){Object(k.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var W=[{value:"all",label:"All"},{value:"liked",label:"Liked"},{value:"mine",label:"Mine"}],K=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={displayFilters:!1,gemsData:null,gemsToDisplay:null,gemSelectedInfo:null,filterStatus:{showGems:!0,showTrips:!0,userFilter:"all",dateStart:"2019-01-01",dateEnd:"2019-12-31",foodDrinks:!0,cultureArts:!0,sports:!0,party:!0,hikes:!0,nature:!0,others:!0}},a.getGemsData=function(){g.a.get("/api/gem").then((function(e){console.log(e.data),a.setState({gemsData:e.data,gemsToDisplay:e.data})}))},a.filterGems=function(e){e.preventDefault();var t=a.state.filterStatus;g.a.get("/api/gem").then((function(e){var n=e.data.filter((function(e){return t.showGems&&("all"===t.userFilter.value||"liked"===t.userFilter.value&&e.likes.includes(a.props.user._id)||"mine"===t.userFilter.value&&e.creator===a.props.user._id)&&!0===t[e.category]&&t.dateStart<=e.created_at.slice(0,10)&&e.created_at.slice(0,10)<=t.dateEnd}));a.setState({gemsData:e.data,gemsToDisplay:n,displayFilters:!1,gemSelectedInfo:null})}))},a.componentDidMount=function(){a.state.gemsData||a.getGemsData()},a.handleSelectChange=function(e){a.setState({filterStatus:z({},a.state.filterStatus,{userFilter:e})}),console.log("Option selected:",e)},a.handleChange=function(e){console.log(e.target);var t=e.target.name,n="checkbox"===e.target.type?e.target.checked:e.target.value;a.setState({filterStatus:z({},a.state.filterStatus,Object(k.a)({},t,n))})},a.toggleFilters=function(){var e=!a.state.displayFilters;a.setState({displayFilters:e})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.state.gemsToDisplay?r.a.createElement("div",null,r.a.createElement("div",{className:"explore-places page-wrapper"},r.a.createElement("div",{className:"explore-places-map"},this.state.displayFilters&&r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{handleFilterChange:this.handleChange,handleSelectChange:this.handleSelectChange,handleFilterSubmit:this.filterGems,userFilterOptions:W,filterStatus:this.state.filterStatus})),r.a.createElement(_,{toggleFilters:this.toggleFilters,gems:this.state.gemsToDisplay,user:this.props.user,gemSelectedInfo:this.state.gemSelectedInfo})))):r.a.createElement(r.a.Fragment,null)}}]),t}(n.Component),Q=(a(127),a(440),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:a.props.user.username,profilePic:a.props.user.profilePic,travelInterests:a.props.user.travelInterests},a.handleChange=function(e){var t=e.target.name,n=e.target.value,r=a.state;r.username,r.profilePic,r.travelInterests;a.setState(Object(k.a)({},t,n))},a.handleSubmit=function(e){e.preventDefault(),console.log(e.target);var t=e.target.profilePic.files[0],n=new FormData;n.append("profilePic",t),g.a.post("/api/user/add-image",n).then((function(e){a.setState({profilePic:e.data.secure_url},(function(){console.log("Profile pic updated",a.state.profilePic)})),g.a.patch("/api/user/update",{username:a.state.username,profilePic:a.state.profilePic,travelInterests:a.state.travelInterests}).then((function(e){a.props.setUser(e.data),a.props.history.push("/profile/".concat(a.props.user._id))})).catch((function(e){console.log(e)}))})).catch((function(e){g.a.patch("/api/user/update",{username:a.state.username,profilePic:a.state.profilePic,travelInterests:a.state.travelInterests}).then((function(e){a.props.setUser(e.data),console.log("newUser set call component"),a.props.history.push("/profile/".concat(a.props.user._id))})).catch((function(e){console.log(e),a.props.history.push()}))}))},a.directProfile=function(){a.props.history.push("/profile/".concat(a.props.user._id))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pageheader"},"Update your profile"),r.a.createElement("div",{className:"wrapper-update"},r.a.createElement(N.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(N.a.Group,null,r.a.createElement("h2",null,"Hello ",this.props.user.username)),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,{htmlFor:"username",className:"label-title"},"Change your username:"),r.a.createElement(N.a.Control,{className:"input-login-signup",onChange:this.handleChange,placeholder:this.props.user.username,type:"text",name:"username",id:"username",value:this.state.username})),r.a.createElement(N.a.Group,{className:"image-uploader"},r.a.createElement(N.a.Label,{htmlFor:"profilePic"},"Update your Picture"),r.a.createElement(N.a.Control,{id:"profilePic",type:"file",name:"profilePic"})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,{htmlFor:"travelInterests",className:"label-title"},"Tell us something about you:"),r.a.createElement(N.a.Control,{className:"input-login-signup",onChange:this.handleChange,id:"travelInterests",name:"travelInterests",value:this.state.travelInterests,placeholder:this.props.user.travelInterests})),r.a.createElement("div",{className:"update-btn-row1"},r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn loginBtn generalBtn btn-primary",type:"submit"},"Save"))),r.a.createElement("div",{className:"update-btn-row1"},r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn loginBtn generalBtn btn-primary",onClick:this.directProfile,variant:"contained",type:"button"},r.a.createElement("i",{class:"fas fa-trash-alt"})))))))}}]),t}(n.Component)),X=a(163),$=a.n(X),ee=a(14),te=a(238),ae=(a(110),a(442),a(514));function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(a,!0).forEach((function(t){Object(k.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var se=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={viewport:{width:"100%",height:"50vh",latitude:52.520008,longitude:13.404954,zoom:4,bearing:0,pitch:0},coordinates:[],trip_details:{}},a.drawTrip=function(e){var t=a.reactMap.getMap();t.on("load",(function(){t.addLayer({id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#1B4F72","line-width":4}})}))},a.showGems=function(){if(console.log("Here is showTrips elements:",a.state.trip_details.gemsVisited),a.state.trip_details&&a.state.trip_details.gemsVisited)return a.state.trip_details.gemsVisited.map((function(e){return r.a.createElement("div",null,r.a.createElement(I.b,{to:"/gem/".concat(e._id)},r.a.createElement(ae.a,{className:"btn-triplist"},e.title," >")),r.a.createElement("hr",null))}))},a.gemsDisplay=function(){if(0!==Object.keys(a.state.trip_details).length)return a.state.trip_details.gemsVisited.map((function(e){return r.a.createElement(B.a,{latitude:e.latitude,longitude:e.longitude,offsetTop:-30,offsetLeft:-15,captureClick:!1,draggable:!1},r.a.createElement("div",{className:"gem-marker"},r.a.createElement("img",{src:"/images/diamond-icon-green.png",alt:"Gem"})))}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=[],a={};g.a.get("/api/trip/tripgems/".concat(this.props.match.params.tripId)).then(function(){var n=Object(te.a)($.a.mark((function n(r){var s,l,o,i,c,m,u,p,d,h;return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=re({},r.data),console.log(r.data.gemsVisited),s=!0,l=!1,o=void 0,n.prev=5,i=r.data.gemsVisited.entries()[Symbol.iterator]();case 7:if(s=(c=i.next()).done){n.next=22;break}if(m=c.value,u=Object(ee.a)(m,2),p=u[0],d=u[1],p===r.data.gemsVisited.length-1){n.next=18;break}return n.next=15,g.a.get("https://api.mapbox.com/directions/v5/mapbox/cycling/".concat(d.longitude,",").concat(d.latitude,";").concat(r.data.gemsVisited[p+1].longitude,",").concat(r.data.gemsVisited[p+1].latitude,"?geometries=geojson&access_token=")+"pk.eyJ1IjoiaW91cmkiLCJhIjoiY2swaTRnZGxnMDhyYjNmbXp1cTh4aGY0YSJ9.MmEIAiv3ZCEZzc_VLtZnCg");case 15:h=n.sent,console.log(h.data.routes[0].geometry.coordinates),t.push.apply(t,Object(V.a)(h.data.routes[0].geometry.coordinates));case 18:console.log(p);case 19:s=!0,n.next=7;break;case 22:n.next=28;break;case 24:n.prev=24,n.t0=n.catch(5),l=!0,o=n.t0;case 28:n.prev=28,n.prev=29,s||null==i.return||i.return();case 31:if(n.prev=31,!l){n.next=34;break}throw o;case 34:return n.finish(31);case 35:return n.finish(28);case 36:t.length>0&&(console.log(t[Math.floor(t.length/2)][0]),console.log(t[Math.floor(t.length/2)][1]),e.setState({coordinates:t,viewport:re({},e.state.viewport,{latitude:t[Math.floor(t.length/2)][1],longitude:t[Math.floor(t.length/2)][0]}),trip_details:a}),e.drawTrip(t));case 37:case"end":return n.stop()}}),n,null,[[5,24,28,36],[29,,31,35]])})));return function(e){return n.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",{className:"pageheader"},this.state.trip_details.name&&this.state.trip_details.name&&r.a.createElement("h3",null," ",this.state.trip_details.name)),r.a.createElement("div",{className:"mapposition"},r.a.createElement(B.d,Object.assign({},this.state.viewport,{ref:function(t){return e.reactMap=t},onViewportChange:function(t){return e.setState({viewport:t})},mapboxApiAccessToken:"pk.eyJ1IjoiaW91cmkiLCJhIjoiY2swaTRnZGxnMDhyYjNmbXp1cTh4aGY0YSJ9.MmEIAiv3ZCEZzc_VLtZnCg",mapStyle:"mapbox://styles/iouri/ck1kx1czi1r971cpj0s2ngu2q"}),this.gemsDisplay(),r.a.createElement("div",{style:{position:"absolute",right:"2vw",top:"10vh"}},r.a.createElement(B.b,{onViewportChange:function(t){return e.setState({viewport:t})}})))),r.a.createElement("div",{className:"padding-wrapper"},r.a.createElement("div",{className:"creatorinfos"},r.a.createElement("p",null,"Created by "),r.a.createElement("p",null,this.state.trip_details&&this.state.trip_details.creator&&r.a.createElement("a",{href:"/profile/".concat(this.state.trip_details.creator._id)},this.state.trip_details.creator.username))),r.a.createElement("div",null,r.a.createElement("h2",null,"Explore Gems of the Trip"),r.a.createElement("hr",null),r.a.createElement("div",null,this.showGems())))))}}]),t}(n.Component),le=a(4),oe=(a(142),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={suggestGemsData:null},a.getGemsData=function(){g.a.get("/api/gem").then((function(e){console.log(e.data),console.log(a.props.locationName);var t=e.data.filter((function(e){var t=0;if(a.props.locationName.split(",").forEach((function(a){-1!==e.locationName.indexOf(a)&&(t++,console.log(t))})),t>=2)return!0}));console.log(t),a.setState({suggestGemsData:t})}))},a.handleRouteExperience=function(e){console.log("Experience called"),console.log(e),a.props.fetchGemInfo({latitude:e.latitude,longitude:e.longitude,locationName:e.locationName,discovery:!1}),a.props.setStage("AddExperience")},a.handleRouteDiscovery=function(){console.log("Discovery called"),a.props.fetchGemInfo({discovery:!0}),a.props.setStage("AddDiscovery")},a.componentDidMount=function(){a.state.gemsData||a.getGemsData()},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return console.log("How many gems",this.state.gemsData),r.a.createElement("div",null,r.a.createElement("div",{className:"pageheader"},r.a.createElement("h4",null,void 0===this.state.gemsData?"May be you mean one of these Gems?":"Wow it's a new Discovery!")),r.a.createElement("div",{className:"padding-wrapper"},null!=this.state.suggestGemsData&&this.state.suggestGemsData.map((function(t){return r.a.createElement("div",{className:"item-existing",key:t._id},r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("strong",null,t.title)),r.a.createElement("p",null,t.locationName),r.a.createElement("hr",null)),r.a.createElement("div",null,r.a.createElement("button",{class:"btn btn-primary generalBtn",onClick:function(){return e.handleRouteExperience(t)}},r.a.createElement("span",null,"Thats it >"))))})),r.a.createElement("div",{className:"item-new"},r.a.createElement("div",null,r.a.createElement("button",{class:"btn btn-primary generalBtn",onClick:this.handleRouteDiscovery},r.a.createElement("span",null,"Create a new Discovery!",r.a.createElement("img",{src:"https://res.cloudinary.com/dy9sawxrm/image/upload/v1570697079/gembox/icons/diamond-icon-gold_a6lkxq.png"})))))))}}]),t}(n.Component));function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(a,!0).forEach((function(t){Object(k.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var me=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={viewport:{width:"100%",height:"95vh",latitude:52.520008,longitude:13.404954,zoom:1,bearing:0,pitch:0},marker:{markerClicked:!1,latitude:52.520008,longitude:13.404954}},a.onSubmit=function(e){e.preventDefault();var t="";g.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(a.state.marker.longitude,",").concat(a.state.marker.latitude,".json?access_token=")+"pk.eyJ1IjoiaW91cmkiLCJhIjoiY2swaTRnZGxnMDhyYjNmbXp1cTh4aGY0YSJ9.MmEIAiv3ZCEZzc_VLtZnCg").then((function(e){console.log(e),t=e.data.features[0].place_name,a.props.fetchGemInfo({latitude:a.state.marker.latitude,longitude:a.state.marker.longitude,locationName:t}),a.props.setStage("SuggestGem")})).catch((function(e){return console.log("Error in getting the locationname"+e)}))},a.handleViewportChange=function(e){a.setState({viewport:ce({},a.state.viewport,{},e)})},a.onSelected=function(e,t){a.setState({viewport:e,marker:{longitude:e.longitude,latitude:e.latitude}})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.state.marker),console.log(this.state.viewport),r.a.createElement(r.a.Fragment,null,r.a.createElement(B.d,Object.assign({},this.state.viewport,{onViewportChange:function(t){return e.setState({viewport:t,marker:{longitude:t.longitude,latitude:t.latitude}})},mapboxApiAccessToken:"pk.eyJ1IjoiaW91cmkiLCJhIjoiY2swaTRnZGxnMDhyYjNmbXp1cTh4aGY0YSJ9.MmEIAiv3ZCEZzc_VLtZnCg",mapStyle:"mapbox://styles/iouri/ck1kx1czi1r971cpj0s2ngu2q",captureDoubleClick:!1,doubleClickZoom:!1,onDblClick:function(t){e.setState({marker:{longitude:t.lngLat[0],latitude:t.lngLat[1]}})}}),r.a.createElement(B.a,{latitude:this.state.marker.latitude,longitude:this.state.marker.longitude,offsetTop:-50,offsetLeft:-25,captureClick:!1,draggable:!0,onDragEnd:function(t){return e.setState({marker:{longitude:t.lngLat[0],latitude:t.lngLat[1]}})}},r.a.createElement("div",{className:"gem-marker gem-marker-set"},r.a.createElement("img",{src:"/images/diamond-icon-green.png",alt:"gem"}))),r.a.createElement("div",{style:{position:"absolute",right:"2vw",top:"10vh"}},r.a.createElement(B.b,{onViewportChange:function(t){return e.setState({viewport:t})}})),r.a.createElement("div",null,r.a.createElement(M.a,{mapboxApiAccessToken:"pk.eyJ1IjoiaW91cmkiLCJhIjoiY2swaTRnZGxnMDhyYjNmbXp1cTh4aGY0YSJ9.MmEIAiv3ZCEZzc_VLtZnCg",onSelected:this.onSelected,viewport:this.state.viewport,hideOnSelect:!0})),r.a.createElement("div",{className:"setGem"},r.a.createElement("button",{className:"btn btn-primary generalBtn",onClick:this.onSubmit},"Create Gem"))))}}]),t}(n.Component),ue=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"This is Gem Welcome")}}]),t}(n.Component),pe=(a(229),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={message:"",isEnabled:!1,nopic:!1},a.handleChanges=function(e){var t=e.target,n=t.name,r=t.value;console.log(e.target.visitedDate),a.props.fetchGemInfo(Object(k.a)({},n,r)),setTimeout((function(){a.setState({isEnabled:a.props.checkStatus()},(function(){return console.log("updated state",a.state)}))}),10)},a.noPicProceed=function(e){e.preventDefault(),"yes"===e.target.name?(a.props.setStage("GemSuccess"),a.props.createGem()):a.setState({message:""})},a.handleSubmit=function(e){e.preventDefault(),e.persist();var t=e.target.imageUrl.files[0],n=new FormData;n.append("imageUrl",t),g.a.post("/api/gem/add-image",n).then((function(e){a.props.fetchGemInfo({imageUrl:e.data.secure_url}),a.props.setStage("GemSuccess"),a.props.createGem()})).catch((function(e){a.setState({message:"You want to proceed without uploading a picture?"})}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"pageheader"},r.a.createElement("h4",null," Tell others about your Experience")),r.a.createElement("div",{className:"padding-wrapper"},this.props.locationName&&r.a.createElement("h2",null,this.props.locationName.substring(0,30),"..."),r.a.createElement(N.a,{onSubmit:this.handleSubmit},r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,{htmlFor:"title"},"Title: "),r.a.createElement(N.a.Control,{required:!0,onChange:this.handleChanges,type:"text",name:"title",id:"title",value:this.props.title})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,{htmlFor:"description"},"Description: "),r.a.createElement(N.a.Control,{required:!0,onChange:this.handleChanges,type:"text",name:"description",id:"description"})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,{htmlFor:"category"},"Category "),r.a.createElement(N.a.Control,{required:!0,onChange:this.handleChanges,name:"category",as:"select"},r.a.createElement("option",{value:""},"Choose a category"),r.a.createElement("option",{value:"cultureArts"},"Culture & Arts"),r.a.createElement("option",{value:"foodDrinks"},"Food & Drinks"),r.a.createElement("option",{value:"hikes"},"Hikes"),r.a.createElement("option",{value:"nature"},"Nature"),r.a.createElement("option",{value:"party"},"Party"),r.a.createElement("option",{value:"sports"},"Sports"),r.a.createElement("option",{value:"others"},"Others"))),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,{htmlFor:"goodToKnow"},"Good to know: "),r.a.createElement(N.a.Control,{required:!0,onChange:this.handleChanges,type:"text",name:"goodToKnow",id:"goodToKnow"})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,{htmlFor:"visitedDate"},"Date: "),r.a.createElement(N.a.Control,{required:!0,onChange:this.handleChanges,type:"date",name:"visitedDate",id:"visitedDate"})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Control,{type:"file",name:"imageUrl"})),this.state.message&&r.a.createElement("div",{className:"dangerMessage"},r.a.createElement("p",null,this.state.message),r.a.createElement("button",{className:"btn btn-primary generalBtn",onClick:this.noPicProceed,name:"yes"},"Yes"),r.a.createElement("button",{className:"btn btn-primary generalBtn",onClick:this.noPicProceed,name:"no"},"No")),r.a.createElement(F.a,{className:"btn btn-primary generalBtn btnexperience",disabled:!this.state.isEnabled,type:"submit"},"Create Experience >"))))}}]),t}(r.a.Component)),de=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={message:"",isEnabled:!1,nopic:!1},a.handleChanges=function(e){var t=e.target,n=t.name,r=t.value;a.props.fetchGemInfo(Object(k.a)({},n,r)),setTimeout((function(){a.setState({isEnabled:a.props.checkStatus()})}),10)},a.noPicProceed=function(e){e.preventDefault(),"yes"===e.target.name?(a.props.fetchGemInfo({discovery:!0}),a.props.setStage("GemSuccess"),a.props.createGem()):a.setState({message:""})},a.handleSubmit=function(e){e.preventDefault(),e.persist();var t=e.target.imageUrl.files[0],n=new FormData;n.append("imageUrl",t),g.a.post("/api/gem/add-image",n).then((function(e){a.props.fetchGemInfo({imageUrl:e.data.secure_url,discovery:!0}),a.props.setStage("GemSuccess"),a.props.createGem()})).catch((function(e){a.setState({message:"You want to proceed without uploading a picture?"})}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"pageheader"},r.a.createElement("h4",null," Tell others about your Discovery")),r.a.createElement("div",{className:"padding-wrapper"},this.props.locationName&&r.a.createElement("h2",null,this.props.locationName.substring(0,30),"..."),r.a.createElement(N.a,{onSubmit:this.handleSubmit},r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,{htmlFor:"title"},"Title: "),r.a.createElement(N.a.Control,{required:!0,onChange:this.handleChanges,type:"text",name:"title",id:"title",value:this.props.title})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,{htmlFor:"description"},"Description: "),r.a.createElement(N.a.Control,{required:!0,onChange:this.handleChanges,type:"text",name:"description",id:"description"})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,{htmlFor:"category"},"Category "),r.a.createElement(N.a.Control,{required:!0,onChange:this.handleChanges,name:"category",as:"select"},r.a.createElement("option",{value:""},"Choose a category"),r.a.createElement("option",{value:"cultureArts"},"Culter & Arts"),r.a.createElement("option",{value:"foodDrinks"},"Food & Drinks"),r.a.createElement("option",{value:"hikes"},"Hikes"),r.a.createElement("option",{value:"nature"},"Nature"),r.a.createElement("option",{value:"party"},"Party"),r.a.createElement("option",{value:"sports"},"Sports"),r.a.createElement("option",{value:"others"},"Others"))),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,{htmlFor:"goodToKnow"},"Good to know: "),r.a.createElement(N.a.Control,{required:!0,onChange:this.handleChanges,type:"text",name:"goodToKnow",id:"goodToKnow"})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,{htmlFor:"visitedDate"},"Date: "),r.a.createElement(N.a.Control,{required:!0,onChange:this.handleChanges,type:"date",name:"visitedDate",id:"visitedDate"})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Control,{type:"file",name:"imageUrl"})),this.state.message&&r.a.createElement("div",{className:"dangerMessage"},r.a.createElement("p",null,this.state.message),r.a.createElement("button",{className:"btn btn-primary generalBtn",onClick:this.noPicProceed,name:"yes"},"Yes"),r.a.createElement("button",{className:"btn btn-primary generalBtn",onClick:this.noPicProceed,name:"no"},"No")),r.a.createElement(F.a,{className:"btn btn-primary generalBtn newdiscovery",disabled:!this.state.isEnabled,type:"submit"},r.a.createElement("span",null,"Create your Discovery"," ",r.a.createElement("img",{src:"https://res.cloudinary.com/dy9sawxrm/image/upload/v1570697079/gembox/icons/diamond-icon-gold_a6lkxq.png"}))))))}}]),t}(r.a.Component),he=a(508),ge=a(510),fe=a(512),Ee=a(509),be=a(511),ve=a(513);function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Ce=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleRoute=function(e){switch(e.target.name){case"view":a.props.history.push("/gem/".concat(a.props.gemId));break;case"share":break;case"add":a.props.setStage("AddToTrip");break;case"map":a.props.history.push("/explore-places")}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e="https://gem-box.herokuapp.com/gem/".concat(this.props.gemId);return console.log(e),console.log(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(a,!0).forEach((function(t){Object(k.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.props)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"gem-success-header"},r.a.createElement("h2",null,"Congrats! You just created a new Gem!")),r.a.createElement("div",{className:"success-container"},r.a.createElement("div",{className:"success-flex-share"},r.a.createElement("p",null,"Share your newest Discovery:"),r.a.createElement("div",{className:"success-flex-container"},r.a.createElement("div",null,r.a.createElement(he.a,{url:e},r.a.createElement(Ee.a,{size:32,round:!0}))),r.a.createElement("div",null,r.a.createElement(ge.a,{url:e},r.a.createElement(be.a,{size:32,round:!0}))),r.a.createElement("div",null,r.a.createElement(fe.a,{url:e},r.a.createElement(ve.a,{size:32,round:!0}))))),r.a.createElement("div",null,r.a.createElement("div",{className:"success-btn-container"},r.a.createElement(F.a,{className:"btn btn-primary generalBtn",onClick:this.handleRoute,name:"view"},"View Gem  ",r.a.createElement("i",{class:"fas fa-eye"}))),r.a.createElement("div",{className:"success-btn-container"},r.a.createElement(F.a,{className:"btn btn-primary generalBtn",onClick:this.handleRoute,name:"add"},"Add to a Trip  ",r.a.createElement("i",{class:"fas fa-plus"}))),r.a.createElement("div",{className:"success-btn-container"},r.a.createElement(F.a,{className:"btn btn-primary generalBtn",onClick:this.handleRoute,name:"map"},"Back to Map  ",r.a.createElement("i",{class:"fa fa-globe","aria-hidden":"true"}))))))}}]),t}(r.a.Component),we=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={formStatus:!1,trips:[],successMessage:""},a.handleChanges=function(e){var t=e.target,n=t.name,r=t.value;a.props.fetchTripInfos(Object(k.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault(),a.props.createTrip(),C(a.props.creatorid).then((function(e){a.setState({trips:e,successMessage:"Your Trip has been created"}),setTimeout((function(){a.setState({successMessage:""})}),3e3)})).catch((function(e){console.log(e)}))},a.showTrips=function(){return a.state.trips.map((function(e){return r.a.createElement(F.a,{className:"btn btn-primary generalBtn btn-select",onClick:function(){return a.props.selectTrip(e._id,e.name,e.gemsVisited)}},e.name)}))},a.toogleForm=function(){a.setState({formStatus:!a.state.formStatus})},a.componentDidMount=function(){C(a.props.creatorid).then((function(e){a.setState({trips:e})})).catch((function(e){console.log(e)}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"pageheader"},r.a.createElement("h4",null," To which Trip you want to add the Gem?")),r.a.createElement("div",{className:"padding-wrapper trip-flex"},this.state.formStatus?r.a.createElement("button",{className:"btn btn-primary generalBtn btntrip",onClick:this.toogleForm},"Close Form"):r.a.createElement("button",{className:"btn btn-primary generalBtn-disabled btntrip",onClick:this.toogleForm},"Open Form to Create Trip"),this.state.formStatus?r.a.createElement(N.a,{onSubmit:this.handleSubmit},r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,{htmlFor:"name"},"Trip Name "),r.a.createElement(N.a.Control,{required:!0,onChange:this.handleChanges,type:"text",name:"name",id:"name",value:this.props.title})),this.state.successMessage&&r.a.createElement("div",{className:"successMessage"},r.a.createElement("p",null,this.state.successMessage)),r.a.createElement(F.a,{className:"btn btn-primary generalBtn",type:"submit"},"Create Trip")):r.a.createElement("div",null),this.state.trips.length>0?r.a.createElement("div",{className:"triplist"},r.a.createElement("h3",null,"Choose an existing Trip"),this.showTrips()):r.a.createElement(r.a.Fragment,null)))}}]),t}(n.Component),Oe=(n.Component,function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={availableGems:[],message:"",showTripButton:!1},a.saveTrip=function(){a.setState({message:"Your changes have successfully been saved",showTripButton:!0}),a.props.saveGemsInTrip(),setTimeout((function(){a.setState({message:""})}),3e3)},a.showGems=function(){var e=[];return void 0!==a.props.TripInfos.existingGems&&(e=a.props.TripInfos.existingGems),console.log("Check here after click",a.props.TripInfos.existingGems),a.props.TripInfos.allGems.map((function(t){return e.includes(t._id)?r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary generalBtn btn-select",onClick:function(){return a.props.updateGemStatus(t._id)}},r.a.createElement("p",null," ",t.title),r.a.createElement("p",{className:"action-status"},"Click to ",r.a.createElement("strong",null,"remove")))):r.a.createElement("div",null,r.a.createElement("button",{class:"btn btn-primary generalBtn-disabled btn-select",onClick:function(){a.props.updateGemStatus(t._id)}},r.a.createElement("p",null,t.title),r.a.createElement("p",{className:"action-status"},"Click to ",r.a.createElement("strong",null,"add"))))}))},a.componentDidMount=function(){console.log("Did Mount and have Tripinfo props",a.props.TripInfos.existingGems)},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log("All TRIP INFOS HERE",this.props.TripInfos),r.a.createElement("div",null,r.a.createElement("div",{className:"pageheader"},r.a.createElement("h4",null,"Which Gems do you want to add to ",this.props.tripName)),r.a.createElement("div",{className:"padding-wrapper trip-flex"},r.a.createElement("div",{className:"gemlist"},this.showGems()),this.state.message&&r.a.createElement("div",{className:"successMessage"},r.a.createElement("p",null,this.state.message)),r.a.createElement("button",{class:"btn btn-primary generalBtn savetrip",onClick:this.saveTrip},"Save Gem to Trip"),this.state.showTripButton?r.a.createElement("a",{href:"/trip/".concat(this.props.TripInfos.selectedTrip)},r.a.createElement("button",{class:"btn btn-primary generalBtn savetrip"},"View Trip")):r.a.createElement(r.a.Fragment,null)))}}]),t}(n.Component));function je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?je(a,!0).forEach((function(t){Object(k.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):je(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ke=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={stage:"SetGem",gem:{title:"",description:"",goodToKnow:"",imageUrl:"",creator:a.props.user._id,discovery:null,category:"",visitedDate:"",latitude:0,longitude:0,locationName:"",gemId:null},trip:{tripId:null,name:"",creator:a.props.user._id,selectedTrip:null,allGems:[],addedGems:[],existingGems:[]}},a.checkStatus=function(){console.log(a.state.gem);var e=["title","description","goodToKnow","visitedDate","category","locationName"];for(var t in a.state.gem)if(""===a.state.gem[t]&&-1!==e.indexOf(t))return!1;return!0},a.createGem=function(){console.log("create gem with props",a.state.gem);var e=Object(le.a)({},a.state.gem);delete e.stage,""===e.creator&&(e.creator=null),v(e).then((function(e){a.setState({gem:{gemId:e._id}})}))},a.fetchGemInfo=function(e){a.setState({gem:Se({},a.state.gem,{},e)})},a.createTrip=function(){var e=Object(le.a)({},a.state.trip);delete e.stage,""===e.creator&&(e.creator=null),y(e).then((function(e){a.setState({trip:{tripId:e._id}}),console.log("created trip with state",a.state.trip),C(a.props.user._id)}))},a.fetchTripInfo=function(e){a.setState({trip:Se({},a.state.trip,{},e)})},a.getTrips=function(){C().then((function(e){a.setState({trip:{tripId:e._id}})}))},a.selectTrip=function(e,t,n){O(a.props.user._id).then((function(r){a.setState({stage:"AddGemToTrip",trip:{selectedTrip:e,allGems:r,name:t,existingGems:n}})}))},a.saveGemsInTrip=function(){var e=Object(le.a)({},a.state.trip);console.log("State Trip bevor query",a.state.trip),""===e.creator&&(e.creator=null),w(e).then((function(e){console.log("Request saveGemsTrip done")}))},a.updateGemStatus=function(e,t){var n=Object(V.a)(a.state.trip.existingGems);-1===n.indexOf(e)?n.push(e):n.splice(n.indexOf(e),1),a.setState({trip:Se({},a.state.trip,{existingGems:n})})},a.setStage=function(e){a.setState({stage:e})},a.changeStage=function(e){switch(e){case"GemWelcome":return r.a.createElement(ue,{setStage:a.setStage});case"SetGem":return r.a.createElement(me,{fetchGemInfo:a.fetchGemInfo,setStage:a.setStage});case"SuggestGem":return r.a.createElement(oe,{locationName:a.state.gem.locationName,setStage:a.setStage,fetchGemInfo:a.fetchGemInfo});case"AddExperience":return r.a.createElement(pe,{locationName:a.state.gem.locationName,fetchGemInfo:a.fetchGemInfo,setStage:a.setStage,checkStatus:a.checkStatus,createGem:a.createGem});case"AddDiscovery":return r.a.createElement(de,{locationName:a.state.gem.locationName,fetchGemInfo:a.fetchGemInfo,setStage:a.setStage,checkStatus:a.checkStatus,createGem:a.createGem});case"GemSuccess":return r.a.createElement("div",{className:"padding-wrapper"},r.a.createElement(Ce,Object.assign({gemId:a.state.gem.gemId,setStage:a.setStage},a.props)));case"AddToTrip":return r.a.createElement(we,{fetchTripInfos:a.fetchTripInfo,setStage:a.setStage,createTrip:a.createTrip,creatorid:a.props.user._id,selectTrip:a.selectTrip});case"AddGemToTrip":return r.a.createElement(Oe,{TripInfos:a.state.trip,updateGemStatus:a.updateGemStatus,saveGemsInTrip:a.saveGemsInTrip,tripName:a.state.trip.name})}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log(this.state.stage,this.state),r.a.createElement("div",null,this.changeStage(this.state.stage))}}]),t}(r.a.Component),Ne=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"404 - Page not found")}}]),t}(n.Component),Ge=(a(489),a(490),a(53)),De=a(123),xe=(a(491),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={popularGems:[],trips:[],discoveries:0,experiences:0,creatorProfileId:a.props.match.params.profileId,ownprofile:a.props.user._id===a.props.match.params.profileId,isFollowing:!1,creatorInfos:null,followers:0},a.getpopularGems=function(){console.log("Get Popular call made"),g.a.get("/api/gem/creator/".concat(a.state.creatorProfileId)).then((function(e){var t=e.data.filter((function(e){return e.discovery})).length,n=e.data.filter((function(e){return!e.discovery})).length;a.setState({popularGems:e.data,discoveries:t,experiences:n}),g.a.get("/api/user/".concat(a.state.creatorProfileId)).then((function(e){console.log(e.data),a.setState({creatorInfos:e.data,followers:e.data.followers.length},(function(){}))})).catch((function(e){console.log("Problem getting gems"),g.a.get("/api/user/".concat(a.state.creatorProfileId)).then((function(e){a.setState({creatorInfos:e.data},(function(){console.log("Here are the Follower Infors of creator",a.state.creatorInfos)}))})).catch((function(e){console.log("Problem getting user",a.state.creatorProfileId)}))}))}))},a.componentDidMount=function(){C(a.state.creatorProfileId).then((function(e){a.setState({trips:e},(function(){a.getpopularGems(),a.showTrips()}))})).catch((function(e){console.log(e)})),a.props.user.following&&a.props.user.following.includes(a.state.creatorProfileId)&&a.setState({isFollowing:!0})},a.displayPopularGems=function(){return r.a.createElement(De.a,{className:"slider"},a.state.popularGems.map((function(e){return r.a.createElement(De.a.Item,{key:e._id},r.a.createElement("img",{className:"d-block w-100 slider",src:e.imageUrl,alt:"gem"}),r.a.createElement(De.a.Caption,null,r.a.createElement("h3",{style:{fontWeight:900}},e.title),r.a.createElement("p",{style:{fontWeight:500}},e.locationName),r.a.createElement("a",{href:"/gem/".concat(e._id)},r.a.createElement("div",{className:"generalBtn btn btn-primary",onClick:function(){return console.log("test")}},"Explore"))))})))},a.showTrips=function(){return console.log("Here is showTrips elements:",a.state.trips),a.state.trips?a.state.trips.map((function(e){return r.a.createElement("div",null,r.a.createElement(I.b,{to:"/trip/".concat(e._id)},r.a.createElement(ae.a,{className:"btn-triplist"},e.name," >")),r.a.createElement("hr",null))})):r.a.createElement("div",null,"No trips created yet. Start to create a Gem :)")},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleFollowClick",value:function(){var e=this;g.a.put("/api/user/updateFollower",{creatorId:this.state.creatorProfileId}).then((function(t){console.log("My updated follwing array",t),e.setState({isFollowing:!e.state.isFollowing,followers:t.data.followers.length})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.creatorInfos;return console.log("Creator Infos",this.state.creatorInfos),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"profile-flexbox"},r.a.createElement("div",{className:"nameedit"},r.a.createElement("div",null,r.a.createElement("h1",null,null!==this.state.creatorInfos&&this.state.creatorInfos.username)),r.a.createElement("div",null,this.state.ownprofile?r.a.createElement(I.b,{to:"/profile"},r.a.createElement(ae.a,{variant:"contained",type:"button",className:"editprof btn-primary btn generalBtn"},"Edit")):r.a.createElement("div",null,this.state.isFollowing?r.a.createElement("button",{className:"follow-button btn btn-primary generalBtn",onClick:function(a){return e.handleFollowClick(t._id)}},"Unfollow"," ",r.a.createElement("img",{src:"https://res.cloudinary.com/dy9sawxrm/image/upload/v1570697521/gembox/icons/followed-user_dlgqrl.png"})):r.a.createElement("button",{className:"follow-button btn btn-primary generalBtn-disabled",onClick:function(a){return e.handleFollowClick(t._id)}},"Follow"," ",r.a.createElement("img",{src:"https://res.cloudinary.com/dy9sawxrm/image/upload/v1570697521/gembox/icons/follow-user_xix0yg.png"}))))),r.a.createElement("div",{className:"headerinfo"},r.a.createElement("div",null,r.a.createElement("img",{className:"profilepic",src:null!==this.state.creatorInfos&&this.state.creatorInfos.profilePic})),r.a.createElement("div",{className:"basiccounts"},r.a.createElement("p",null,"Score",r.a.createElement("span",{className:"Score"},"1200")),r.a.createElement("p",null,"Followers",r.a.createElement("span",{className:"Score"},this.state.followers)),r.a.createElement("p",null,"Following",r.a.createElement("span",{className:"Score"},null!==this.state.creatorInfos&&this.state.creatorInfos.following.length)))),r.a.createElement("div",{className:"experiences-discoveries"},r.a.createElement("div",null,r.a.createElement("img",{src:"https://res.cloudinary.com/dy9sawxrm/image/upload/v1570697079/gembox/icons/diamond-icon-gold_a6lkxq.png"}),r.a.createElement("span",{className:"Score"}," ",this.state.discoveries),r.a.createElement("span",null," Discoveries ")),r.a.createElement("div",null,r.a.createElement("img",{src:"https://res.cloudinary.com/dy9sawxrm/image/upload/v1570697079/gembox/icons/diamond-icon-green_kjzvbz.png"}),r.a.createElement("span",{className:"Score"},this.state.experiences),r.a.createElement("span",null," Experiences"))),r.a.createElement("div",{className:"travelinterests"},r.a.createElement("div",{className:"topicheader"},r.a.createElement("h2",null,"Travelinterests")," ",r.a.createElement("hr",null),r.a.createElement("div",null,null!==this.state.creatorInfos&&this.state.creatorInfos.travelInterests))),r.a.createElement("div",{className:"topicheader"},r.a.createElement("h2",null,"Most popular gems"),r.a.createElement("hr",null),r.a.createElement("div",{className:"gemlist"},this.displayPopularGems())),r.a.createElement("div",{className:"trips"},r.a.createElement("div",{className:"topicheader"},r.a.createElement("h2",null,"All Trips"),r.a.createElement("hr",null),r.a.createElement("div",null,this.showTrips())))))}}]),t}(n.Component)),Ae=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:a.props.user},a.setUser=function(e){a.setState({user:e})},a.setUserProfile=function(e){console.log("HERE setUser called",e),a.setState({creatorProfile:e})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"app-wrapper"},r.a.createElement(Ge.c,null,r.a.createElement(Ge.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(P,Object.assign({user:e.state.user,setUser:e.setUser},t))}}),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{render:function(t){return r.a.createElement(j,Object.assign({user:e.state.user,setUser:e.setUser},t))}}),r.a.createElement(Ge.c,null,r.a.createElement(Ge.a,{exact:!0,path:"/login",render:function(t){return r.a.createElement(D,Object.assign({setUser:e.setUser},t))}}),r.a.createElement(Ge.a,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(x,Object.assign({setUser:e.setUser},t))}}),")} />",r.a.createElement(Ge.a,{exact:!0,path:"/create-gem",render:function(t){return r.a.createElement(ke,Object.assign({},t,{user:e.state.user}))}}),r.a.createElement(Ge.a,{exact:!0,path:"/logout",component:A}),r.a.createElement(Ge.a,{exact:!0,path:"/explore-places",render:function(t){return r.a.createElement(K,Object.assign({setUser:e.setUser},t,{user:e.state.user,referredbyProfile:e.state.referredbyProfile}))}}),r.a.createElement(Ge.a,{path:"/profile/:profileId",render:function(t){return r.a.createElement(xe,Object.assign({setUser:e.setUser},t,{user:e.state.user}))}}),r.a.createElement(Ge.a,{exact:!0,path:"/profile",render:function(t){return r.a.createElement(Q,Object.assign({setUser:e.setUser},t,{user:e.state.user}))}}),r.a.createElement(Ge.a,{exact:!0,path:"/trip",component:se}),r.a.createElement(Ge.a,{exact:!0,path:"/trip/:tripId",render:function(t){return r.a.createElement(se,Object.assign({},t,{user:e.state.user}))}}),r.a.createElement(Ge.a,{exact:!0,path:"/gem/:gemId",render:function(t){return r.a.createElement(q,Object.assign({},t,{user:e.state.user}))}}),r.a.createElement(Ge.a,{exact:!0,path:"/about-us",component:S}),r.a.createElement(Ge.a,{component:Ne})))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));g.a.get("/api/auth/loggedin").then((function(e){var t=e.data;l.a.render(r.a.createElement(I.a,null,r.a.createElement(Ae,{user:t})),document.getElementById("root"))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[253,1,2]]]);
//# sourceMappingURL=main.fde249ef.chunk.js.map